# SetunaCloneAG 操作マニュアル

## 1. はじめに
本ソフトウェアは、画面の一部を切り取ってデスクトップ上に最前面表示しておくことができるスクリーンキャプチャツールです。 SETUNA2の機能を参考に、現代的なPython環境で再現・拡張を行いました。

## 2. 起動方法
Python環境がインストールされている状態で、以下のコマンドを実行してください。

```bash
python main.py
```

起動すると、タスクトレイにアイコンが表示されます。

## 3. 基本操作

### スクリーンキャプチャ
- **ホットキー**: `Ctrl + Shift + Z`
- 上記ホットキーを押すとキャプチャモードになり、画面が暗くなります。
- マウスドラッグで範囲を選択すると、その部分が切り取られ、「スニペットウィンドウ」としてデスクトップに表示されます。
- 右クリックでキャプチャをキャンセルできます。

### スニペットウィンドウの操作
- **移動**: スニペットウィンドウをドラッグ・アンド・ドロップで移動できます。
  - 移動中（ドラッグ中）は、背面のウィンドウが見えるように半透明（不透明度50%）になります。
- **拡大・縮小**: スニペットウィンドウ上でマウスホイールを回転させると、画像を拡大・縮小表示できます。
- **シェーディング（最小化）**: ウィンドウをダブルクリックすると、タイトルバーのみのような細い棒状に最小化されます。もう一度ダブルクリックすると元に戻ります。
- **閉じる**: ウィンドウがアクティブな状態で `Q` キーを押すか、右クリックメニューから「閉じる」を選択、またはホイールクリックで閉じることができます。

## 4. 編集・高度な機能

### ペン描画モード
- **ホットキー**: `E` (Toggle)
- アクティブなスニペット上で `E` キーを押すとペンモードになり、赤色でフリーハンドの線を描くことができます。
- もう一度 `E` キーを押すと解除されます。

### トリミングモード
- **ホットキー**: `T` (Trim)
- `T` キーを押すとトリミングモードになります。
- 画像内をドラッグして範囲指定すると、その部分だけを切り抜くことができます。

### アンドゥ（元に戻す）
- **ホットキー**: `Ctrl + Z`
- 描画やトリミング操作を直前の状態に戻すことができます。

### グループ化（タブ表示）
- 複数のスニペットが開いている状態で、右クリックメニューから「画像をすべて結合」を選択すると、全てのスニペットが1つのタブ付きウィンドウにまとめられます。

## 5. 右クリックメニュー
スニペットウィンドウを右クリックすると以下のメニューが表示されます。

- **Toggle Pen Mode (E)**: ペン描画モードの切り替え
- **Trim Mode (T)**: トリミングモードの切り替え
- **Merge All Snippets**: 全てのスニペットを結合（2つ以上ある場合のみ表示）
- **Copy (Ctrl+C)**: 画像をクリップボードにコピー
- **Save As...**: 画像をファイルとして保存
- **Opacity**: ウィンドウの不透明度を変更（20% ~ 100%）
- **Scale**: 表示倍率を変更（50% ~ 200%）
- **Close (Q)**: スニペットを閉じる

## 6. ショートカットキー一覧

| コンテキスト | キー | 動作 |
| --- | --- | --- |
| グローバル | `Ctrl + Shift + Z` | スクリーンキャプチャ開始 |
| スニペット | `Q` | ウィンドウを閉じる |
| スニペット | `E` | ペン描画モード切替 |
| スニペット | `T` | トリミングモード切替 |
| スニペット | `Ctrl + C` | クリップボードにコピー |
| スニペット | `Ctrl + X` | 画像をコピーして閉じる（カット） |
| スニペット | `Ctrl + Z` | アンドゥ（元に戻す） |
| スニペット | `Esc` | （各種モードなどの）キャンセル |
